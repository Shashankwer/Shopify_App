{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport { Card, ResourceList, TextStyle, Stack, Thumbnail } from '@shopify/polaris';\nimport store from 'store-js';\nimport { Redirect } from '@shopify/app-bridge/actions';\nimport { Context } from '@shopify/app-bridge-react';\nconst GET_PRODUCTS_BY_ID = gql`\n  query getProducts($ids: [ID!]!) {\n    nodes(ids: $ids) {\n      ... on Product {\n        title\n        handle\n        descriptionHtml\n        id\n        images(first: 1) {\n          edges {\n            node {\n              originalSrc\n              altText\n            }\n          }\n        }\n        variants(first: 1) {\n          edges {\n            node {\n              price\n              id\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nclass ResourceListWithProducts extends React.Component {\n  render() {\n    const twoweeksfromNow = new Date(Date.now() + 12096e5).toDateString();\n    const app = this.context;\n\n    const redirectToProduct = () => {\n      const redirect = Redirect.create(app);\n      redirect.dispatch(Redirect.Action.APP, '/edit-product');\n    };\n\n    return __jsx(Query, {\n      query: GET_PRODUCTS_BY_ID,\n      variables: {\n        ids: store.get('ids')\n      }\n    }, ({\n      data,\n      loading,\n      error\n    }) => {\n      if (loading) return __jsx(\"div\", null, \"Loading ...\");\n      if (error) return __jsx(\"div\", null, error.message);\n      console.log(data);\n      return __jsx(Card, null, __jsx(ResourceList, {\n        showHeader: true,\n        resourceName: {\n          singular: 'Product',\n          plural: 'Products'\n        },\n        items: data.nodes,\n        renderItem: item => {\n          const media = __jsx(Thumbnail, {\n            source: item.images.edges[0] ? item.images.edges[0].originalSrc : '',\n            alt: item.images.edges[0] ? item.images.edges[0].altText : ''\n          });\n\n          const price = item.variants.edges[0].node.price;\n          return __jsx(ResourceList.Item, {\n            id: item.id,\n            media: media,\n            accessibilityLabel: `View details for ${item.title}`,\n            onClick: () => {\n              store.set('item', item);\n              redirectToProduct();\n            }\n          }, __jsx(Stack, null, __jsx(Stack.Item, {\n            fill: true\n          }, __jsx(\"h3\", null, __jsx(TextStyle, {\n            variation: \"strong\"\n          }, item.title))), __jsx(Stack.Item, null, __jsx(\"p\", null, \"Expires on \", twoweeksfromNow))));\n        }\n      }));\n    });\n  }\n\n}\n\n_defineProperty(ResourceListWithProducts, \"contextType\", Context);\n\nexport default ResourceListWithProducts;\n/*\r\nMaking use of localstorgae for persisting data. \r\nOne can make use of store.js a corss browser JavaScript library for managing localStorage\r\nThis works well for testing the development app. If we were building app in production the app would require the data to be stored in databases. \r\n\r\nPolaris Empty state compoment is the first thing that the merchant will see on the main page of the application. \r\n\r\nAfter Selecting the first product the page can list the that one just built and add logic to tell the index file when to show the empty state and when to show resourc empty state and when to show the resource list. \r\n\r\n\r\n\r\n*/","map":{"version":3,"sources":["D:/shopify_app/components/ResourceList.js"],"names":["gql","Query","Card","ResourceList","TextStyle","Stack","Thumbnail","store","Redirect","Context","GET_PRODUCTS_BY_ID","ResourceListWithProducts","React","Component","render","twoweeksfromNow","Date","now","toDateString","app","context","redirectToProduct","redirect","create","dispatch","Action","APP","ids","get","data","loading","error","message","console","log","singular","plural","nodes","item","media","images","edges","originalSrc","altText","price","variants","node","id","title","set"],"mappings":"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","sourcesContent":["import gql from 'graphql-tag';\r\nimport {Query} from 'react-apollo';\r\nimport {Card,ResourceList,TextStyle,Stack,Thumbnail} from '@shopify/polaris';\r\nimport store from 'store-js';\r\nimport {Redirect} from '@shopify/app-bridge/actions';\r\nimport {Context} from '@shopify/app-bridge-react';\r\n\r\n\r\nconst GET_PRODUCTS_BY_ID = gql`\r\n  query getProducts($ids: [ID!]!) {\r\n    nodes(ids: $ids) {\r\n      ... on Product {\r\n        title\r\n        handle\r\n        descriptionHtml\r\n        id\r\n        images(first: 1) {\r\n          edges {\r\n            node {\r\n              originalSrc\r\n              altText\r\n            }\r\n          }\r\n        }\r\n        variants(first: 1) {\r\n          edges {\r\n            node {\r\n              price\r\n              id\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nclass ResourceListWithProducts extends React.Component{\r\n    static contextType = Context;\r\n    render(){\r\n        const twoweeksfromNow=new Date(Date.now()+12096e5).toDateString();\r\n        const app = this.context;\r\n        const redirectToProduct = ()=>{\r\n            const redirect = Redirect.create(app);            \r\n                redirect.dispatch(\r\n                    Redirect.Action.APP,\r\n                    '/edit-product'\r\n                );\r\n            };\r\n        return (\r\n            <Query query={GET_PRODUCTS_BY_ID} variables={{ids:store.get('ids')}}>\r\n                {({data,loading,error})=>{\r\n                    if (loading) return <div>Loading ...</div>\r\n                    if (error) return <div>{error.message}</div>\r\n                    console.log(data);\r\n                    return(\r\n                        <Card>\r\n                            <ResourceList\r\n                            showHeader\r\n                            resourceName={{singular:'Product',plural:'Products'}}\r\n                            items={data.nodes}\r\n                            renderItem={item=>{\r\n                                const media=(\r\n                                    <Thumbnail\r\n                                    source={\r\n                                        item.images.edges[0]?item.images.edges[0].originalSrc:''\r\n                                    }\r\n                                    alt={\r\n                                        item.images.edges[0]?item.images.edges[0].altText:''\r\n                                    }\r\n                                    />\r\n\r\n                                );\r\n                            const price = item.variants.edges[0].node.price;\r\n                            return(\r\n                                <ResourceList.Item\r\n                                id={item.id}\r\n                                media = {media}\r\n                                accessibilityLabel={`View details for ${item.title}`}\r\n                                onClick={()=>{\r\n                                    store.set('item',item);\r\n                                    redirectToProduct();\r\n                                }}\r\n                                >\r\n                                <Stack>\r\n                                    <Stack.Item fill>\r\n                                        <h3>\r\n                                            <TextStyle variation=\"strong\">\r\n                                                {item.title}\r\n                                            </TextStyle>\r\n                                            \r\n                                        </h3>\r\n                                    </Stack.Item>\r\n                                    <Stack.Item>\r\n                            <p>Expires on {twoweeksfromNow}</p>\r\n                                    </Stack.Item>\r\n                                </Stack> \r\n                                    \r\n\r\n                                </ResourceList.Item>\r\n                            );\r\n                            }}\r\n                            />\r\n\r\n                            \r\n                        </Card>\r\n                    );\r\n                }}\r\n            </Query>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ResourceListWithProducts;\r\n\r\n\r\n/*\r\nMaking use of localstorgae for persisting data. \r\nOne can make use of store.js a corss browser JavaScript library for managing localStorage\r\nThis works well for testing the development app. If we were building app in production the app would require the data to be stored in databases. \r\n\r\nPolaris Empty state compoment is the first thing that the merchant will see on the main page of the application. \r\n\r\nAfter Selecting the first product the page can list the that one just built and add logic to tell the index file when to show the empty state and when to show resourc empty state and when to show the resource list. \r\n\r\n\r\n\r\n*/\r\n"]},"metadata":{},"sourceType":"module"}
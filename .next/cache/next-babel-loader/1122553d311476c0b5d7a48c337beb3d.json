{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getProducts($ids: [ID!]!) {\\n    nodes(ids: $ids) {\\n      ... on Product {\\n        title\\n        handle\\n        descriptionHtml\\n        id\\n        images(first: 1) {\\n          edges {\\n            node {\\n              originalSrc\\n              altText\\n            }\\n          }\\n        }\\n        variants(first: 1) {\\n          edges {\\n            node {\\n              price\\n              id\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport { Card, ResourceList, TextStyle, Stack, Thumbnail } from '@shopify/polaris';\nimport store from 'store-js';\nimport { Redirect } from '@shopify/app-bridge/actions';\nimport { Context } from '@shopify/app-bridge-react';\nvar GET_PRODUCTS_BY_ID = gql(_templateObject());\n\nvar ResourceListWithProducts = /*#__PURE__*/function (_React$Component) {\n  _inherits(ResourceListWithProducts, _React$Component);\n\n  var _super = _createSuper(ResourceListWithProducts);\n\n  function ResourceListWithProducts() {\n    _classCallCheck(this, ResourceListWithProducts);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ResourceListWithProducts, [{\n    key: \"render\",\n    value: function render() {\n      var twoweeksfromNow = new Date(Date.now() + 12096e5).toDateString();\n      var app = this.context;\n\n      var redirectToProduct = function redirectToProduct() {\n        var redirect = Redirect.create(app);\n        redirect.dispatch(Redirect.Action.APP, '/edit-product');\n      };\n\n      return __jsx(Query, {\n        query: GET_PRODUCTS_BY_ID,\n        variables: {\n          ids: store.get('ids')\n        }\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n        if (loading) return __jsx(\"div\", null, \"Loading ...\");\n        if (error) return __jsx(\"div\", null, error.message);\n        console.log(data);\n        return __jsx(Card, null, __jsx(ResourceList, {\n          showHeader: true,\n          resourceName: {\n            singular: 'Product',\n            plural: 'Products'\n          },\n          items: data.nodes,\n          renderItem: function renderItem(item) {\n            var media = __jsx(Thumbnail, {\n              source: item.images.edges[0] ? item.images.edges[0].originalSrc : '',\n              alt: item.images.edges[0] ? item.images.edges[0].altText : ''\n            });\n\n            var price = item.variants.edges[0].node.price;\n            return __jsx(ResourceList.Item, {\n              id: item.id,\n              media: media,\n              accessibilityLabel: \"View details for \".concat(item.title),\n              onClick: function onClick() {\n                store.set('item', item);\n                redirectToProduct();\n              }\n            }, __jsx(Stack, null, __jsx(Stack.Item, {\n              fill: true\n            }, __jsx(\"h3\", null, __jsx(TextStyle, {\n              variation: \"strong\"\n            }, item.title))), __jsx(Stack.Item, null, __jsx(\"p\", null, \"Expires on \", twoweeksfromNow))));\n          }\n        }));\n      });\n    }\n  }]);\n\n  return ResourceListWithProducts;\n}(React.Component);\n\n_defineProperty(ResourceListWithProducts, \"contextType\", Context);\n\nexport default ResourceListWithProducts;\n/*\r\nMaking use of localstorgae for persisting data. \r\nOne can make use of store.js a corss browser JavaScript library for managing localStorage\r\nThis works well for testing the development app. If we were building app in production the app would require the data to be stored in databases. \r\n\r\nPolaris Empty state compoment is the first thing that the merchant will see on the main page of the application. \r\n\r\nAfter Selecting the first product the page can list the that one just built and add logic to tell the index file when to show the empty state and when to show resourc empty state and when to show the resource list. \r\n\r\n\r\n\r\n*/","map":{"version":3,"sources":["D:/shopify_app/components/ResourceList.js"],"names":["gql","Query","Card","ResourceList","TextStyle","Stack","Thumbnail","store","Redirect","Context","GET_PRODUCTS_BY_ID","ResourceListWithProducts","twoweeksfromNow","Date","now","toDateString","app","context","redirectToProduct","redirect","create","dispatch","Action","APP","ids","get","data","loading","error","message","console","log","singular","plural","nodes","item","media","images","edges","originalSrc","altText","price","variants","node","id","title","set","React","Component"],"mappings":"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","sourcesContent":["import gql from 'graphql-tag';\r\nimport {Query} from 'react-apollo';\r\nimport {Card,ResourceList,TextStyle,Stack,Thumbnail} from '@shopify/polaris';\r\nimport store from 'store-js';\r\nimport {Redirect} from '@shopify/app-bridge/actions';\r\nimport {Context} from '@shopify/app-bridge-react';\r\n\r\n\r\nconst GET_PRODUCTS_BY_ID = gql`\r\n  query getProducts($ids: [ID!]!) {\r\n    nodes(ids: $ids) {\r\n      ... on Product {\r\n        title\r\n        handle\r\n        descriptionHtml\r\n        id\r\n        images(first: 1) {\r\n          edges {\r\n            node {\r\n              originalSrc\r\n              altText\r\n            }\r\n          }\r\n        }\r\n        variants(first: 1) {\r\n          edges {\r\n            node {\r\n              price\r\n              id\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nclass ResourceListWithProducts extends React.Component{\r\n    static contextType = Context;\r\n    render(){\r\n        const twoweeksfromNow=new Date(Date.now()+12096e5).toDateString();\r\n        const app = this.context;\r\n        const redirectToProduct = ()=>{\r\n            const redirect = Redirect.create(app);            \r\n                redirect.dispatch(\r\n                    Redirect.Action.APP,\r\n                    '/edit-product'\r\n                );\r\n            };\r\n        return (\r\n            <Query query={GET_PRODUCTS_BY_ID} variables={{ids:store.get('ids')}}>\r\n                {({data,loading,error})=>{\r\n                    if (loading) return <div>Loading ...</div>\r\n                    if (error) return <div>{error.message}</div>\r\n                    console.log(data);\r\n                    return(\r\n                        <Card>\r\n                            <ResourceList\r\n                            showHeader\r\n                            resourceName={{singular:'Product',plural:'Products'}}\r\n                            items={data.nodes}\r\n                            renderItem={item=>{\r\n                                const media=(\r\n                                    <Thumbnail\r\n                                    source={\r\n                                        item.images.edges[0]?item.images.edges[0].originalSrc:''\r\n                                    }\r\n                                    alt={\r\n                                        item.images.edges[0]?item.images.edges[0].altText:''\r\n                                    }\r\n                                    />\r\n\r\n                                );\r\n                            const price = item.variants.edges[0].node.price;\r\n                            return(\r\n                                <ResourceList.Item\r\n                                id={item.id}\r\n                                media = {media}\r\n                                accessibilityLabel={`View details for ${item.title}`}\r\n                                onClick={()=>{\r\n                                    store.set('item',item);\r\n                                    redirectToProduct();\r\n                                }}\r\n                                >\r\n                                <Stack>\r\n                                    <Stack.Item fill>\r\n                                        <h3>\r\n                                            <TextStyle variation=\"strong\">\r\n                                                {item.title}\r\n                                            </TextStyle>\r\n                                            \r\n                                        </h3>\r\n                                    </Stack.Item>\r\n                                    <Stack.Item>\r\n                            <p>Expires on {twoweeksfromNow}</p>\r\n                                    </Stack.Item>\r\n                                </Stack> \r\n                                    \r\n\r\n                                </ResourceList.Item>\r\n                            );\r\n                            }}\r\n                            />\r\n\r\n                            \r\n                        </Card>\r\n                    );\r\n                }}\r\n            </Query>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default ResourceListWithProducts;\r\n\r\n\r\n/*\r\nMaking use of localstorgae for persisting data. \r\nOne can make use of store.js a corss browser JavaScript library for managing localStorage\r\nThis works well for testing the development app. If we were building app in production the app would require the data to be stored in databases. \r\n\r\nPolaris Empty state compoment is the first thing that the merchant will see on the main page of the application. \r\n\r\nAfter Selecting the first product the page can list the that one just built and add logic to tell the index file when to show the empty state and when to show resourc empty state and when to show the resource list. \r\n\r\n\r\n\r\n*/\r\n"]},"metadata":{},"sourceType":"module"}